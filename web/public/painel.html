<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Painel do Usuário</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="/styles.css">
  <style>
    body { background: #f1f5f9; }
    .panel { background:#fff; border:1px solid #e2e8f0; border-radius:8px; padding:2rem; max-width:500px; margin:2rem auto; box-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1); }
    .muted { color:#64748b; font-size:.95rem; }
    .row { display:flex; gap:.6rem; flex-wrap:wrap; align-items:center; }
    .row > * { flex: 1 1 220px; }
    .btn-primary { background:#3b82f6; color:#fff; border:0; padding:.5rem .8rem; border-radius:6px; cursor:pointer; }
    .btn:disabled { opacity: 0.6; cursor: not-allowed; }
  </style>
</head>
<body>
  <nav>
    <a href="/">Home</a>
    <strong>Painel</strong>
    <span id="userInfo" style="margin-left:auto;"></span>
  </nav>
  <div class="panel">
    <h2>Minha Conta</h2>
    <div id="accountInfo" class="muted">Carregando dados...</div>
    <hr style="margin:2rem 0;">
    <h3>Histórico de Figurinhas Enviadas</h3>
    <div id="myStickers" class="muted">Carregando...</div>
    <hr style="margin:2rem 0;">
    <h3>Verificação WhatsApp</h3>
    <div id="whatsappVerification">
      <div id="verificationStatus" class="muted">Verificando status...</div>
      <div id="verificationForm" style="display:none;">
        <p class="muted">Para verificar sua conta e poder editar figurinhas, envie <strong>#verificar</strong> para o bot no WhatsApp e digite o código aqui:</p>
        <form id="whatsappVerificationForm" onsubmit="return false;">
          <div class="row">
            <input id="verificationCode" type="text" placeholder="Código de 8 caracteres" maxlength="8" style="text-transform:uppercase;" autocomplete="one-time-code">
            <button id="btnVerifyWhatsApp" type="button" class="btn-primary">Verificar</button>
          </div>
        </form>
        <div id="verification_msg" class="muted"></div>
      </div>
    </div>
    <hr style="margin:2rem 0;">
    <h3>Alterar Senha</h3>
    <form id="changePasswordForm" onsubmit="return false;">
      <div class="row">
        <input id="cp_current" type="password" placeholder="Senha atual" autocomplete="current-password">
        <input id="cp_new" type="password" placeholder="Nova senha (mín. 8)" autocomplete="new-password">
        <input id="cp_new2" type="password" placeholder="Confirmar nova senha" autocomplete="new-password">
      </div>
      <div style="display:flex; gap:.5rem; justify-content:flex-end; margin-top:.6rem;">
        <button id="btnChangePass" type="button" class="btn-primary">Alterar senha</button>
      </div>
    </form>
    <div id="cp_msg" class="muted"></div>
  </div>
  <script src="/app.js"></script>
  <script src="/painel.js"></script>
</body>
</html>
